/*! For license information please see wptelegram--p2tg-gb.d8152471.js.LICENSE.txt */
!function(){"use strict";var e={1725:function(e){var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var a,l,s=i(e),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]))n.call(a,u)&&(s[u]=a[u]);if(t){l=t(a);for(var d=0;d<l.length;d++)r.call(a,l[d])&&(s[l[d]]=a[l[d]])}}return s}},6374:function(e,t,n){n(1725);var r=n(9196),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)l.call(t,r)&&!s.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},184:function(e,t,n){e.exports=n(6374)},9196:function(e){e.exports=window.React}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}!function(){var e=window.wp.plugins,t=window.wp.i18n,r="",i=t.createI18n,o=(null===i||void 0===i?void 0:i())||t,a=function(e){return o.__(e,r)},l=window.wp.element,s=window.wp.editPost,c=window.wp.components;function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=n(184),b=function(){return(0,p.jsx)(c.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false",children:(0,p.jsx)(c.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z"})})};function g(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m,w,j,x=window.wp.data,O="_wptg_p2tg_",S=h({channels:[],delay:"0",disable_notification:!1,message_template:"",override_switch:!1,send2tg:!0,send_featured_image:!0,files:{}},null===(m=window.wptelegram)||void 0===m?void 0:m.savedSettings),_=function(){var e=(0,x.useDispatch)("core/editor").editPost,t=C().data;return(0,l.useCallback)((function(n){return function(r){var i=h(h({},t),{},y({},n,r));e(y({},O,i),{undoIgnore:!0}),S=i}}),[t,e])},C=function(){return(0,x.useSelect)((function(e){var t=e("core/editor"),n=t.getEditedPostAttribute,r=t.isSavingPost,i=t.isPublishingPost,o=t.isEditedPostDirty,a=n(O);return{data:a||S,isDirty:o(),isSaving:r()||i(),savedData:a}}),[])},P=(null===(w=window.wptelegram)||void 0===w||null===(j=w.uiData)||void 0===j?void 0:j.allChannels)||[],k=function(e){var t=e.isDisabled,n=C().data,r=_(),i=(0,l.useCallback)((function(e){return function(){var t=-1!==n.channels.indexOf(e)?n.channels.filter((function(t){return t!==e})):[].concat(g(n.channels),[e]);r("channels")(t)}}),[n.channels,r]);return(0,p.jsx)(c.BaseControl,{id:"wptg-send-to",label:a("Send to"),children:(0,p.jsx)("div",{role:"group",id:"wptg-send-to","aria-label":a("Send to"),children:P.map((function(e,r){return(0,p.jsx)(c.CheckboxControl,{label:e,disabled:t,checked:-1!==n.channels.indexOf(e),onChange:i(e)},e+r)}))})})};function D(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function T(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}var I,A,F,B=window.wp.mediaUtils,R=function(e){var t=e.open;return(0,p.jsx)(c.Button,{isSecondary:!0,onClick:t,id:"wptg-upload-media",children:a("Add or Upload Files")})},N=[],M=function(e){var t=e.isDisabled,n=C().data,r=_(),i=(0,l.useCallback)((function(e){return function(){var t=n.files,i=(t[e],D(t,[e].map(T)));r("files")(i)}}),[n.files,r]),o=(0,l.useCallback)((function(e){var t=e.reduce((function(e,t){var n=t.id,r=t.url;return h(h({},e),{},y({},n,r))}),{});r("files")(t)}),[r]);return(0,p.jsx)(c.Disabled,{isDisabled:t,children:(0,p.jsxs)(c.BaseControl,{id:"wptg-files",label:a("Files"),help:a("Files to be sent after the message."),children:[(0,p.jsx)("br",{}),(0,p.jsx)(B.MediaUpload,{multiple:!0,onSelect:o,allowedTypes:N,render:R}),(0,p.jsx)("ul",{role:"group",id:"wptg-files","aria-label":a("Files"),children:Object.entries(n.files).map((function(e,t){var n=f(e,2),r=n[0],o=n[1].split("/"),a=o[o.length-1];return(0,p.jsx)("li",{children:(0,p.jsxs)(c.Flex,{justify:"flex-start",children:[(0,p.jsx)(c.Button,{icon:(0,p.jsx)(c.Icon,{icon:"no-alt"}),onClick:i(r)}),(0,p.jsx)("span",{children:a})]})},r+t)}))})]})})},U={width:"100%",maxWidth:"650px"},L={display:"flex",flexDirection:"column",justifyContent:"space-between"},q={width:"100%",justifyContent:"center",marginTop:"2em"},$={height:"1.5em"},z=function(){var e=C().data,n=_(),r=f((0,l.useState)(!1),2),i=r[0],o=r[1],s=(0,l.useCallback)((function(){return o(!0)}),[]),u=(0,l.useCallback)((function(){return o(!1)}),[]),d=(0,l.useCallback)((function(e){"wptg-upload-media"!==e.target.id&&u()}),[u]),g=(0,p.jsx)("div",{style:$});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Button,{"aria-label":a("Override settings"),disabled:!e.send2tg,icon:(0,p.jsx)(b,{}),isSmall:!0,onClick:s}),i&&(0,p.jsx)(c.Modal,{isDismissible:!1,title:(0,t.sprintf)("%s (%s)",a("Post to Telegram"),a("Override settings")),onRequestClose:d,style:U,children:(0,p.jsxs)("div",{style:L,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(c.ToggleControl,{label:a("Override settings"),checked:e.override_switch,onChange:n("override_switch")}),g,(0,p.jsx)(k,{isDisabled:!e.override_switch}),g,(0,p.jsx)(M,{isDisabled:!e.override_switch}),g,(0,p.jsx)(c.ToggleControl,{disabled:!e.override_switch,label:a("Disable Notifications"),checked:e.disable_notification,onChange:n("disable_notification")}),g,(0,p.jsx)(c.TextControl,{disabled:!e.override_switch,label:a("Delay in Posting"),value:e.delay,onChange:n("delay"),step:"0.5",min:0,type:"number"}),g,(0,p.jsx)(c.ToggleControl,{disabled:!e.override_switch,label:a("Featured Image"),checked:e.send_featured_image,onChange:n("send_featured_image"),help:a("Send Featured Image (if exists).")}),g,(0,p.jsx)(c.TextareaControl,{disabled:!e.override_switch,label:a("Message Template"),value:e.message_template,onChange:n("message_template"),rows:10})]}),(0,p.jsx)(c.Button,{style:q,isPrimary:!0,onClick:u,children:a("Save Changes")})]})})]})},W=function(){var e=C(),t=e.data,n=e.savedData,r=e.isSaving,i=e.isDirty,o=_();return(0,l.useEffect)((function(){!i||r||n||o("send2tg")(t.send2tg)}),[t.send2tg,i,r,n,o]),(0,p.jsxs)(s.PluginPostStatusInfo,{children:[(0,p.jsx)(c.ToggleControl,{label:a("Send to Telegram"),checked:t.send2tg,onChange:o("send2tg")}),(0,p.jsx)(z,{}),"\xa0"]})},G=null===(I=window.wptelegram)||void 0===I?void 0:I.i18n;A=G,r=F="wptelegram",o.setLocaleData(A,F),(0,e.registerPlugin)("wptelegram-post-to-telegram",{icon:null,render:function(){return(0,p.jsx)(W,{})}})}()}();
//# sourceMappingURL=wptelegram--p2tg-gb.d8152471.js.map